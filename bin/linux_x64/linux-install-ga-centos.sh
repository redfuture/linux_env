#OPTS="-name quzheng-ubuntu-server-16"
OPTS="-name quzheng-centos-6u9"
OPTS="$OPTS -nodefaults"
OPTS="$OPTS -cpu qemu64,kvm=off"
OPTS="$OPTS -smp 2"
OPTS="$OPTS -enable-kvm"
OPTS="$OPTS -machine accel=kvm"
OPTS="$OPTS -m 8G"
OPTS="$OPTS -balloon virtio"
OPTS="$OPTS -rtc clock=host,base=localtime"
#export QEMU_PA_SAMPLES=128
#export QEMU_AUDIO_DRV=pa
#export QEMU_PS_SERVER=localhost
#export PULSE_SERVER=localhost
#OPTS="$OPTS -soundhw hda"
OPTS="$OPTS -k en-us"
OPTS="$OPTS -boot order=c"
#OPTS="$OPTS -usbdevice tablet"
#OPTS="$OPTS -drive id=disk0,if=none,cache=unsafe,format=qcow2,file=/home/disk1/base-images/ubuntu-server-16.04.3.qcow2"
OPTS="$OPTS -drive id=disk0,if=none,cache=unsafe,format=qcow2,file=/home/disk1/base-images/centos-6.9.qcow2"
#OPTS="$OPTS -device driver=virtio-scsi-pci,id=scsi0"
#OPTS="$OPTS -device scsi-hd,drive=disk0"
OPTS="$OPTS -device virtio-blk-pci,drive=disk0,scsi=off,config-wce=off"
OPTS="$OPTS -fsdev local,id=share1,path=/tmp/,security_model=mapped"
OPTS="$OPTS -device virtio-9p-pci,fsdev=share1,mount_tag=host_share"

#OPTS="$OPTS -drive id=cd0,if=none,format=raw,readonly,file=/home/disk1/iso-images/ubuntu-16.04.3-server-amd64.iso"
#OPTS="$OPTS -drive id=cd0,if=none,format=raw,readonly,file=/home/disk1/iso-images/CentOS-6.9-x86_64-minimal.iso"
#OPTS="$OPTS -device driver=ide-cd,bus=ide.0,drive=cd0"
#OPTS="$OPTS -drive id=virtiocd,if=none,format=raw,file=/home/disk4/vm-video-evidence/iso-images/virtio-win.iso"
#OPTS="$OPTS -device driver=ide-cd,bus=ide.1,drive=virtiocd"
#OPTS="$OPTS -net nic,model=virtio"
#OPTS="$OPTS -net nic -net user,hostfwd=::22011-:22"
#OPTS="$OPTS -netdev user,id=eth0,hostname=ubuntu-server-16,hostfwd=::22001-:22"
OPTS="$OPTS -netdev user,id=eth0,hostname=centos-6u9,hostfwd=::22011-:22"
OPTS="$OPTS -device virtio-net-pci,netdev=eth0"
OPTS="$OPTS -vga std"
#OPTS="$OPTS -monitor none"
#OPTS="$OPTS -display none"
OPTS="$OPTS -vnc :$(( 8222 - 5900 )),share=force-shared,websocket=8223"

OPTS="$OPTS -chardev socket,path=/tmp/linux-test-qga.sock,server,nowait,id=qga0"
OPTS="$OPTS -device virtio-serial-pci"
OPTS="$OPTS -device virtserialport,chardev=qga0,name=org.qemu.guest_agent.0"
qemu-system-x86_64 $OPTS
